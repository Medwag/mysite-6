// backend/test-wa.jsw
import { sendWhatsAppAlert } from 'backend/notify.jsw';

export async function testWhatsAppSend() {
    const testNumber = "27123456789"; // Replace with a valid SA number in Meta format
    const testMsg = "ğŸš€ Test WhatsApp from EmergiTag â€” this confirms the send works.";

    console.log("ğŸ“Œ Starting WhatsApp test send...");

    try {
        if (!testNumber) {
            console.warn("âš ï¸ No phone number provided.");
            return { success: false, error: "No phone number" };
        }

        if (!testMsg) {
            console.warn("âš ï¸ No message provided.");
            return { success: false, error: "No message" };
        }

        console.log("ğŸ“Œ Attempting to send to:", testNumber);
        const result = await sendWhatsAppAlert(testNumber, testMsg);

        console.log("âœ… WhatsApp test send result:", result);
        return { success: true, result };

    } catch (err) {
        console.error("âŒ WhatsApp test send failed:", err);
        return { success: false, error: err.message };
    }
}
